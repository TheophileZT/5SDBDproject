# This is a basic workflow to help you get started with Actions

name: Fetch disruptions and save to MongoDB
on:
  workflow_dispatch:
  
jobs:
  fetch_disruptions:
    runs-on: ubuntu-latest
    steps:
       - uses: actions/checkout@v3
       - name: Set up Python
         uses: actions/setup-python@v4
         with:
           python-version: "3.11"
       - name: Install dependencies
         run: |
            python -m pip install --upgrade pip
            pip install -r requirements.txt

       - name: Setting up API Key secrets and mock test
         env:
           TISSEO_API_KEY : ${{ secrets.API_KEY_TISSEO }}
         run: python scripts/fetch_disruptions.py
